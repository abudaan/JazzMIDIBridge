(function(){"use strict";var e,t,n,r,i,s,o,u,a=[],f=[],l=[],c={sharp:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],flat:["C","D?","D","E?","E","F","G?","G","A?","A","B?","B"],"enh-sharp":["B#","C#","C##","D#","D##","E#","F#","F##","G#","G##","A#","A##"],"enh-flat":["D??","D?","E??","E?","F?","G??","G?","A??","A?","B?","B?","C?"]},h="0.1";l[128]="NOTE OFF";l[144]="NOTE ON";l[160]="POLY PRESSURE";l[176]="CONTROL CHANGE";l[192]="PROGRAM CHANGE";l[208]="CHANNEL PRESSURE";l[224]="PITCH BEND";l[240]="SYSTEM EXCLUSIVE";try{console.log("")}catch(p){console={log:function(e){}}}i=function(t,n,r){var i={index:t,deviceType:n,deviceName:r,isOpen:false},s=function(t,n,r){var i,s;if(t==="midimessage"){e.MidiInOpen(n.index,function(e,t,n,u){s=(t>>4)*16;i=t&15;r(o(s,n,u,i,e))})}},u=function(t,n){if(t.isOpen===false){t.open()}e.MidiOut(n.status,n.data1,n.data2)},a=function(e){e.isOpen=true},f=function(n){n.device=e.MidiOutOpen(t);n.isOpen=true},l=function(t){if(t.isOpen){e.MidiOutClose()}t.isOpen=false},c=function(t){if(t.isOpen){e.MidiInClose()}t.isOpen=false};if(n==="INPUT"){i.addEventListener=function(e,t){s(e,i,t)};i.open=function(){a(i)};i.close=function(){c(i)}}else if(n==="OUTPUT"){i.sendMIDIMessage=function(e){u(i,e)};i.open=function(){f(i)};i.close=function(){l(i)}}return i};r=function(){var t,n;n=e.MidiInList();for(t in n){if(n.hasOwnProperty(t)){a.push(i(t,"INPUT",n[t]))}}n=e.MidiOutList();for(t in n){if(n.hasOwnProperty(t)){f.push(i(t,"OUTPUT",n[t]))}}};u=function(e){return"command:"+l[e.command]+" channel:"+e.channel+" data1:"+e.data1+" data2:"+e.data2+" timestamp:"+e.timestamp};o=function(e,t,n,r,i){var s={command:e,status:parseInt(e)+(parseInt(r)||0),channel:r||0,data1:t,data2:n,timestamp:i||0};s.toString=function(){return u(s)};return s};n={enumerateInputs:function(){return a},enumerateOutputs:function(){return f},getInput:function(e){if(e<0||e>=a.length){return false}var t=a[e];if(t.isOpen===false){t.open()}return t},getOutput:function(e){if(e<0||e>=f.length){return false}var t=f[e];if(t.isOpen===false){t.open()}return t},createMIDIMessage:o};t={NOTE_OFF:128,NOTE_ON:144,POLY_PRESSURE:160,CONTROL_CHANGE:176,PROGRAM_CHANGE:192,CHANNEL_PRESSURE:208,PITCH_BEND:224,SYSTEM_EXCLUSIVE:240,MIDI_TIMECODE:241,SONG_POSITION:242,SONG_SELECT:243,TUNE_REQUEST:246,EOX:247,TIMING_CLOCK:248,START:250,CONTINUE:251,STOP:252,ACTIVE_SENSING:254,SYSTEM_RESET:255,NOTE_NAMES_SHARP:"sharp",NOTE_NAMES_FLAT:"flat",NOTE_NAMES_SOUNDFONT:"soundfont",NOTE_NAMES_ENHARMONIC_SHARP:"enh-sharp",NOTE_NAMES_ENHARMONIC_FLAT:"enh-flat",noteNameMode:"sharp",init:function(t,i){var s=document.createElement("object"),o=document.createElement("object");s.setAttribute("classid","CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90");s.setAttribute("style","margin-left:-1000px;");o.setAttribute("type","audio/x-jazz");o.setAttribute("style","visibility:hidden;");s.appendChild(o);document.body.appendChild(s);e=s;if(!e||!e.isJazz){e=o}if(e){r();t(n)}else if(i!==undefined){i("No Jazz plugin detected, please visit http://jazzplugin.net")}else{alert("No Jazz plugin detected, please visit http://jazzplugin.net")}},rescan:function(){r()},getNoteName:function(e,n){n=n||t.noteNameMode;var r=Math.floor(e/12-1),i=c[n][e%12];return i+r},getNoteNumber:function(e,t){var n=-1,r,i,s,o,u;e=e.toUpperCase();for(r in c){if(c.hasOwnProperty(r)){i=c[r];for(s=0,o=i.length;s<o;s=s+1){if(i[s]===e){n=s;break}}}}if(n===-1){return"invalid note name"}u=12+n+t*12;return u},getCommand:function(e){return l[(e>>4)*16]},getChannel:function(e){return e&15},getVersion:function(){return h},getJazz:function(){return e},getJazzVersion:function(){return e.version},getTime:function(){return e.Time()},wrapElement:function(e){if(e.addEventListener!==undefined){return}e.addEventListener=function(t,n,r){e.attachEvent(t,n)}}};t.wrapElement(window);window.JMB=t})(window)