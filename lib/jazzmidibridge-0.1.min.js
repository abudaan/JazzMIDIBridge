(function(){"use strict";var a,b,c,d,e,f,g,h,i=[],j=[],k=[],l={sharp:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],flat:["C","D♭","D","E♭","E","F","G♭","G","A♭","A","B♭","B"],"enh-sharp":["B#","C#","C##","D#","D##","E#","F#","F##","G#","G##","A#","A##"],"enh-flat":["D♭♭","D♭","E♭♭","E♭","F♭","G♭♭","G♭","A♭♭","A♭","B♭","B♭","C♭"]},m="0.1";k[128]="NOTE OFF";k[144]="NOTE ON";k[160]="POLY PRESSURE";k[176]="CONTROL CHANGE";k[192]="PROGRAM CHANGE";k[208]="CHANNEL PRESSURE";k[224]="PITCH BEND";k[240]="SYSTEM EXCLUSIVE";try{console.log("")}catch(n){console={log:function(a){}}}e=function(b,c,d){var e={index:b,deviceType:c,deviceName:d,isOpen:false},f=function(b,c,d){var e,f;if(b==="midimessage"){a.MidiInOpen(c.index,function(a,b,c,h){f=(b>>4)*16;e=b&15;d(g(f,c,h,e,a))})}},h=function(b,c){if(b.isOpen===false){b.open()}a.MidiOut(c.status,c.data1,c.data2)},i=function(a){a.isOpen=true},j=function(c){c.device=a.MidiOutOpen(b);c.isOpen=true},k=function(b){if(b.isOpen){a.MidiOutClose()}b.isOpen=false},l=function(b){if(b.isOpen){a.MidiInClose()}b.isOpen=false};if(c==="INPUT"){e.addEventListener=function(a,b){f(a,e,b)};e.open=function(){i(e)};e.close=function(){l(e)}}else if(c==="OUTPUT"){e.sendMIDIMessage=function(a){h(e,a)};e.open=function(){j(e)};e.close=function(){k(e)}}return e};d=function(){var b,c;c=a.MidiInList();for(b in c){if(c.hasOwnProperty(b)){i.push(e(b,"INPUT",c[b]))}}c=a.MidiOutList();for(b in c){if(c.hasOwnProperty(b)){j.push(e(b,"OUTPUT",c[b]))}}};h=function(a){return"command:"+k[a.command]+" channel:"+a.channel+" data1:"+a.data1+" data2:"+a.data2+" timestamp:"+a.timestamp};g=function(a,b,c,d,e){var f={command:a,status:parseInt(a)+(parseInt(d)||0),channel:d||0,data1:b,data2:c,timestamp:e||0};f.toString=function(){return h(f)};return f};c={enumerateInputs:function(){return i},enumerateOutputs:function(){return j},getInput:function(a){if(a<0||a>=i.length){return false}var b=i[a];if(b.isOpen===false){b.open()}return b},getOutput:function(a){if(a<0||a>=j.length){return false}var b=j[a];if(b.isOpen===false){b.open()}return b},createMIDIMessage:g};b={NOTE_OFF:128,NOTE_ON:144,POLY_PRESSURE:160,CONTROL_CHANGE:176,PROGRAM_CHANGE:192,CHANNEL_PRESSURE:208,PITCH_BEND:224,SYSTEM_EXCLUSIVE:240,MIDI_TIMECODE:241,SONG_POSITION:242,SONG_SELECT:243,TUNE_REQUEST:246,EOX:247,TIMING_CLOCK:248,START:250,CONTINUE:251,STOP:252,ACTIVE_SENSING:254,SYSTEM_RESET:255,NOTE_NAMES_SHARP:"sharp",NOTE_NAMES_FLAT:"flat",NOTE_NAMES_SOUNDFONT:"soundfont",NOTE_NAMES_ENHARMONIC_SHARP:"enh-sharp",NOTE_NAMES_ENHARMONIC_FLAT:"enh-flat",noteNameModus:"sharp",init:function(b,e){var f=document.createElement("object"),g=document.createElement("object");f.setAttribute("classid","CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90");f.setAttribute("style","margin-left:-1000px;");g.setAttribute("type","audio/x-jazz");g.setAttribute("style","visibility:hidden;");f.appendChild(g);document.body.appendChild(f);a=f;if(!a||!a.isJazz){a=g}if(a){d();b(c)}else if(e!==undefined){e("No Jazz plugin detected, please visit http://jazzplugin.net")}else{alert("No Jazz plugin detected, please visit http://jazzplugin.net")}},rescan:function(){d()},getNoteName:function(a,b){var c=Math.floor(a/12-1),d=l[b][a%12];return d+c},getNoteNumber:function(a,b){var c=-1,d,e,f,g,h;a=a.toUpperCase();for(d in l){if(l.hasOwnProperty(d)){e=l[d];for(f=0,g=e.length;f<g;f=f+1){if(e[f]===a){c=f;break}}}}if(c===-1){return"invalid note name"}h=12+c+b*12;return h},getCommand:function(a){return k[(a>>4)*16]},getVersion:function(){return m},getJazzVersion:function(){return a.version},getTime:function(){return a.Time()},wrapElement:function(a){if(a.addEventListener!==undefined){return}a.addEventListener=function(b,c,d){a.attachEvent(b,c)}}};b.wrapElement(window);window.JMB=b})(window);